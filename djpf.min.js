/* djpf
 * daXXog's JavaScript Polyfill
 * (c) 2013 David (daXXog) Volm ><> + + + <><
 * Released under Apache License, Version 2.0:
 * http://www.apache.org/licenses/LICENSE-2.0.html  
 */ Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=0,r=this.length;r>n;++n)e.call(t,this[n],n,this)}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,u,s=gap,a=t[e];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(e)),"function"==typeof rep&&(a=rep.call(t,e,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?a+"":"null";case"boolean":case"null":return a+"";case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(i=a.length,n=0;i>n;n+=1)u[n]=str(n,a)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+s+"]":"["+u.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,a),o&&u.push(quote(r)+(gap?": ":":")+o));else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(o=str(r,a),o&&u.push(quote(r)+(gap?": ":":")+o));return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+s+"}":"{"+u.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var ua={toString:function(){return navigator.userAgent},test:function(e){return(""+this).toLowerCase().indexOf(e.toLowerCase())>-1}};ua.version=((""+ua).toLowerCase().match(/[\s\S]+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],ua.webkit=ua.test("webkit"),ua.gecko=ua.test("gecko")&&!ua.webkit,ua.opera=ua.test("opera"),ua.ie=ua.test("msie")&&!ua.opera,ua.ie6=ua.ie&&document.compatMode&&document.documentElement.style.maxHeight===void 0,ua.ie7=ua.ie&&document.documentElement&&document.documentElement.style.maxHeight!==void 0&&"undefined"==typeof XDomainRequest,ua.ie8=ua.ie&&"undefined"!=typeof XDomainRequest;var domReady=function(){var e=[],t=function(){if(!arguments.callee.done){arguments.callee.done=!0;for(var t=0;e.length>t;t++)e[t]()}};return document.addEventListener&&document.addEventListener("DOMContentLoaded",t,!1),ua.ie&&(function(){try{document.documentElement.doScroll("left"),document.body.length}catch(e){return setTimeout(arguments.callee,50),void 0}t()}(),document.onreadystatechange=function(){"complete"===document.readyState&&(document.onreadystatechange=null,t())}),ua.webkit&&document.readyState&&function(){"loading"!==document.readyState?t():setTimeout(arguments.callee,10)}(),window.onload=t,function(n){return"function"==typeof n&&(t.done?n():e[e.length]=n),n}}(),cssHelper=function(){var e,t={BLOCKS:/[^\s{][^{]*\{(?:[^{}]*\{[^{}]*\}[^{}]*|[^{}]*)*\}/g,BLOCKS_INSIDE:/[^\s{][^{]*\{[^{}]*\}/g,DECLARATIONS:/[a-zA-Z\-]+[^;]*:[^;]+;/g,RELATIVE_URLS:/url\(['"]?([^\/\)'"][^:\)'"]+)['"]?\)/g,REDUNDANT_COMPONENTS:/(?:\/\*([^*\\\\]|\*(?!\/))+\*\/|@import[^;]+;)/g,REDUNDANT_WHITESPACE:/\s*(,|:|;|\{|\})\s*/g,MORE_WHITESPACE:/\s{2,}/g,FINAL_SEMICOLONS:/;\}/g,NOT_WHITESPACE:/\S+/g},n=!1,r=[],o=function(e){"function"==typeof e&&(r[r.length]=e)},i=function(){for(var t=0;r.length>t;t++)r[t](e)},u={},s=function(e,t){if(u[e]){var n=u[e].listeners;if(n)for(var r=0;n.length>r;r++)n[r](t)}},a=function(e,t,n){if(ua.ie&&!window.XMLHttpRequest&&(window.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")}),!XMLHttpRequest)return"";var r=new XMLHttpRequest;try{r.open("get",e,!0),r.setRequestHeader("X_REQUESTED_WITH","XMLHttpRequest")}catch(o){return n(),void 0}var i=!1;setTimeout(function(){i=!0},5e3),document.documentElement.style.cursor="progress",r.onreadystatechange=function(){4!==r.readyState||i||(!r.status&&"file:"===location.protocol||r.status>=200&&300>r.status||304===r.status||navigator.userAgent.indexOf("Safari")>-1&&r.status===void 0?t(r.responseText):n(),document.documentElement.style.cursor="",r=null)},r.send("")},c=function(e){return e=e.replace(t.REDUNDANT_COMPONENTS,""),e=e.replace(t.REDUNDANT_WHITESPACE,"$1"),e=e.replace(t.MORE_WHITESPACE," "),e=e.replace(t.FINAL_SEMICOLONS,"}")},l={mediaQueryList:function(e){var n={},r=e.indexOf("{"),o=e.substring(0,r);e=e.substring(r+1,e.length-1);for(var i=[],u=[],s=o.toLowerCase().substring(7).split(","),a=0;s.length>a;a++)i[i.length]=l.mediaQuery(s[a],n);var c=e.match(t.BLOCKS_INSIDE);if(null!==c)for(a=0;c.length>a;a++)u[u.length]=l.rule(c[a],n);return n.getMediaQueries=function(){return i},n.getRules=function(){return u},n.getListText=function(){return o},n.getCssText=function(){return e},n},mediaQuery:function(e,n){e=e||"";for(var r,o=!1,i=[],u=!0,s=e.match(t.NOT_WHITESPACE),a=0;s.length>a;a++){var c=s[a];if(r||"not"!==c&&"only"!==c)if(r){if("("===c.charAt(0)){var l=c.substring(1,c.length-1).split(":");i[i.length]={mediaFeature:l[0],value:l[1]||null}}}else r=c;else"not"===c&&(o=!0)}return{getList:function(){return n||null},getValid:function(){return u},getNot:function(){return o},getMediaType:function(){return r},getExpressions:function(){return i}}},rule:function(e,t){for(var n={},r=e.indexOf("{"),o=e.substring(0,r),i=o.split(","),u=[],s=e.substring(r+1,e.length-1).split(";"),a=0;s.length>a;a++)u[u.length]=l.declaration(s[a],n);return n.getMediaQueryList=function(){return t||null},n.getSelectors=function(){return i},n.getSelectorText=function(){return o},n.getDeclarations=function(){return u},n.getPropertyValue=function(e){for(var t=0;u.length>t;t++)if(u[t].getProperty()===e)return u[t].getValue();return null},n},declaration:function(e,t){var n=e.indexOf(":"),r=e.substring(0,n),o=e.substring(n+1);return{getRule:function(){return t||null},getProperty:function(){return r},getValue:function(){return o}}}},d=function(n){if("string"==typeof n.cssHelperText){var r={mediaQueryLists:[],rules:[],selectors:{},declarations:[],properties:{}},o=r.mediaQueryLists,i=r.rules,u=n.cssHelperText.match(t.BLOCKS);if(null!==u)for(var s=0;u.length>s;s++)"@media "===u[s].substring(0,7)?(o[o.length]=l.mediaQueryList(u[s]),i=r.rules=i.concat(o[o.length-1].getRules())):i[i.length]=l.rule(u[s]);var a=r.selectors,c=function(e){for(var t=e.getSelectors(),n=0;t.length>n;n++){var r=t[n];a[r]||(a[r]=[]),a[r][a[r].length]=e}};for(s=0;i.length>s;s++)c(i[s]);var d=r.declarations;for(s=0;i.length>s;s++)d=r.declarations=d.concat(i[s].getDeclarations());var f=r.properties;for(s=0;d.length>s;s++){var p=d[s].getProperty();f[p]||(f[p]=[]),f[p][f[p].length]=d[s]}return n.cssHelperParsed=r,e[e.length]=n,r}},f=function(e,t){return e.cssHelperText=c(t||e.innerHTML),d(e)},p=function(){n=!0,e=[];for(var r=[],o=function(){for(var e=0;r.length>e;e++)d(r[e]);var t=document.getElementsByTagName("style");for(e=0;t.length>e;e++)f(t[e]);n=!1,i()},u=document.getElementsByTagName("link"),s=0;u.length>s;s++){var l=u[s];l.getAttribute("rel").indexOf("style")>-1&&l.href&&0!==l.href.length&&!l.disabled&&(r[r.length]=l)}if(r.length>0){var p=0,g=function(){p++,p===r.length&&o()},m=function(e){var n=e.href;a(n,function(r){r=c(r).replace(t.RELATIVE_URLS,"url("+n.substring(0,n.lastIndexOf("/"))+"/$1)"),e.cssHelperText=r,g()},g)};for(s=0;r.length>s;s++)m(r[s])}else o()},g={mediaQueryLists:"array",rules:"array",selectors:"object",declarations:"array",properties:"object"},m={mediaQueryLists:null,rules:null,selectors:null,declarations:null,properties:null},h=function(e,t){if(null!==m[e]){if("array"===g[e])return m[e]=m[e].concat(t);var n=m[e];for(var r in t)t.hasOwnProperty(r)&&(n[r]=n[r]?n[r].concat(t[r]):t[r]);return n}},y=function(t){m[t]="array"===g[t]?[]:{};for(var n=0;e.length>n;n++)h(t,e[n].cssHelperParsed[t]);return m[t]};domReady(function(){for(var e=document.body.getElementsByTagName("*"),t=0;e.length>t;t++)e[t].checkedByCssHelper=!0;document.implementation.hasFeature("MutationEvents","2.0")||window.MutationEvent?document.body.addEventListener("DOMNodeInserted",function(e){var t=e.target;1===t.nodeType&&(s("DOMElementInserted",t),t.checkedByCssHelper=!0)},!1):setInterval(function(){for(var e=document.body.getElementsByTagName("*"),t=0;e.length>t;t++)e[t].checkedByCssHelper||(s("DOMElementInserted",e[t]),e[t].checkedByCssHelper=!0)},1e3)});var v=function(e){return window.innerWidth!==void 0?window["inner"+e]:document.documentElement!==void 0&&document.documentElement.clientWidth!==void 0&&0!=document.documentElement.clientWidth?document.documentElement["client"+e]:void 0};return{addStyle:function(e,t){var n=document.createElement("style");if(n.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)try{n.styleSheet.cssText=e}catch(r){}else n.appendChild(document.createTextNode(e));return n.addedWithCssHelper=!0,t===void 0||t===!0?cssHelper.parsed(function(){var t=f(n,e);for(var r in t)t.hasOwnProperty(r)&&h(r,t[r]);s("newStyleParsed",n)}):n.parsingDisallowed=!0,n},removeStyle:function(e){return e.parentNode.removeChild(e)},parsed:function(t){n?o(t):e!==void 0?"function"==typeof t&&t(e):(o(t),p())},mediaQueryLists:function(e){cssHelper.parsed(function(){e(m.mediaQueryLists||y("mediaQueryLists"))})},rules:function(e){cssHelper.parsed(function(){e(m.rules||y("rules"))})},selectors:function(e){cssHelper.parsed(function(){e(m.selectors||y("selectors"))})},declarations:function(e){cssHelper.parsed(function(){e(m.declarations||y("declarations"))})},properties:function(e){cssHelper.parsed(function(){e(m.properties||y("properties"))})},broadcast:s,addListener:function(e,t){"function"==typeof t&&(u[e]||(u[e]={listeners:[]}),u[e].listeners[u[e].listeners.length]=t)},removeListener:function(e,t){if("function"==typeof t&&u[e])for(var n=u[e].listeners,r=0;n.length>r;r++)n[r]===t&&(n.splice(r,1),r-=1)},getViewportWidth:function(){return v("Width")},getViewportHeight:function(){return v("Height")}}}();domReady(function enableCssMediaQueries(){var e,t={LENGTH_UNIT:/[0-9]+(em|ex|px|in|cm|mm|pt|pc)$/,RESOLUTION_UNIT:/[0-9]+(dpi|dpcm)$/,ASPECT_RATIO:/^[0-9]+\/[0-9]+$/,ABSOLUTE_VALUE:/^[0-9]*(\.[0-9]+)*$/},n=[],r=function(){var e="css3-mediaqueries-test",t=document.createElement("div");t.id=e;var n=cssHelper.addStyle("@media all and (width) { #"+e+" { width: 1px !important; } }",!1);document.body.appendChild(t);var o=1===t.offsetWidth;return n.parentNode.removeChild(n),t.parentNode.removeChild(t),r=function(){return o},o},o=function(){e=document.createElement("div"),e.style.cssText="position:absolute;top:-9999em;left:-9999em;margin:0;border:none;padding:0;width:1em;font-size:1em;",document.body.appendChild(e),16!==e.offsetWidth&&(e.style.fontSize=16/e.offsetWidth+"em"),e.style.width=""},i=function(t){e.style.width=t;var n=e.offsetWidth;return e.style.width="",n},u=function(e,n){var r=e.length,o="min-"===e.substring(0,4),u=!o&&"max-"===e.substring(0,4);if(null!==n){var s,a;if(t.LENGTH_UNIT.exec(n))s="length",a=i(n);else if(t.RESOLUTION_UNIT.exec(n)){s="resolution",a=parseInt(n,10);var c=n.substring((a+"").length)}else t.ASPECT_RATIO.exec(n)?(s="aspect-ratio",a=n.split("/")):t.ABSOLUTE_VALUE?(s="absolute",a=n):s="unknown"}var l,d;if("device-width"===e.substring(r-12,r))return l=screen.width,null!==n?"length"===s?o&&l>=a||u&&a>l||!o&&!u&&l===a:!1:l>0;if("device-height"===e.substring(r-13,r))return d=screen.height,null!==n?"length"===s?o&&d>=a||u&&a>d||!o&&!u&&d===a:!1:d>0;if("width"===e.substring(r-5,r))return l=document.documentElement.clientWidth||document.body.clientWidth,null!==n?"length"===s?o&&l>=a||u&&a>l||!o&&!u&&l===a:!1:l>0;if("height"===e.substring(r-6,r))return d=document.documentElement.clientHeight||document.body.clientHeight,null!==n?"length"===s?o&&d>=a||u&&a>d||!o&&!u&&d===a:!1:d>0;if("orientation"===e.substring(r-11,r))return l=document.documentElement.clientWidth||document.body.clientWidth,d=document.documentElement.clientHeight||document.body.clientHeight,"absolute"===s?"portrait"===a?d>=l:l>d:!1;if("aspect-ratio"===e.substring(r-12,r)){l=document.documentElement.clientWidth||document.body.clientWidth,d=document.documentElement.clientHeight||document.body.clientHeight;var f=l/d,p=a[1]/a[0];return"aspect-ratio"===s?o&&f>=p||u&&p>f||!o&&!u&&f===p:!1}if("device-aspect-ratio"===e.substring(r-19,r))return"aspect-ratio"===s&&screen.width*a[1]===screen.height*a[0];if("color-index"===e.substring(r-11,r)){var g=Math.pow(2,screen.colorDepth);return null!==n?"absolute"===s?o&&g>=a||u&&a>g||!o&&!u&&g===a:!1:g>0}if("color"===e.substring(r-5,r)){var m=screen.colorDepth;return null!==n?"absolute"===s?o&&m>=a||u&&a>m||!o&&!u&&m===a:!1:m>0}if("resolution"===e.substring(r-10,r)){var h;return h="dpcm"===c?i("1cm"):i("1in"),null!==n?"resolution"===s?o&&h>=a||u&&a>h||!o&&!u&&h===a:!1:h>0}return!1},s=function(e){var t=e.getValid(),n=e.getExpressions(),r=n.length;if(r>0){for(var o=0;r>o&&t;o++)t=u(n[o].mediaFeature,n[o].value);var i=e.getNot();return t&&!i||i&&!t}},a=function(e){for(var t=e.getMediaQueries(),r={},o=0;t.length>o;o++)s(t[o])&&(r[t[o].getMediaType()]=!0);var i=[],u=0;for(var a in r)r.hasOwnProperty(a)&&(u>0&&(i[u++]=","),i[u++]=a);i.length>0&&(n[n.length]=cssHelper.addStyle("@media "+i.join("")+"{"+e.getCssText()+"}",!1))},c=function(e){for(var t=0;e.length>t;t++)a(e[t]);ua.ie?(document.documentElement.style.display="block",setTimeout(function(){document.documentElement.style.display=""},0),setTimeout(function(){cssHelper.broadcast("cssMediaQueriesTested")},100)):cssHelper.broadcast("cssMediaQueriesTested")},l=function(){for(var e=0;n.length>e;e++)cssHelper.removeStyle(n[e]);n=[],cssHelper.mediaQueryLists(c)},d=0,f=function(){var e=cssHelper.getViewportWidth(),t=cssHelper.getViewportHeight();if(ua.ie){var n=document.createElement("div");n.style.width="100px",n.style.height="100px",n.style.position="absolute",n.style.top="-9999em",n.style.overflow="scroll",document.body.appendChild(n),d=n.offsetWidth-n.clientWidth,document.body.removeChild(n)}var o,i=function(){var n=cssHelper.getViewportWidth(),i=cssHelper.getViewportHeight();(Math.abs(n-e)>d||Math.abs(i-t)>d)&&(e=n,t=i,clearTimeout(o),o=setTimeout(function(){r()?cssHelper.broadcast("cssMediaQueriesTested"):l()},500))};window.onresize=function(){var e=window.onresize||function(){};return function(){e(),i()}}()},p=document.documentElement;return p.style.marginLeft="-32767px",setTimeout(function(){p.style.marginTop=""},2e4),function(){r()?p.style.marginLeft="":(cssHelper.addListener("newStyleParsed",function(e){c(e.cssHelperParsed.mediaQueryLists)}),cssHelper.addListener("cssMediaQueriesTested",function(){ua.ie&&(p.style.width="1px"),setTimeout(function(){p.style.width="",p.style.marginLeft=""},0),cssHelper.removeListener("cssMediaQueriesTested",arguments.callee)}),o(),l()),f()}}());try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}